<div class="upload-container">
  <!-- File Upload View -->
  @if (currentView === 'upload') {
    <div class="view-container">
      <app-file-upload (fileUploaded)="onFileUploaded($event)"></app-file-upload>
    </div>
  }

  <!-- Preview View -->
  @if (currentView === 'preview') {
    <div class="view-container">
      <app-data-preview
        [previewData]="previewData"
        [fileType]="fileType"
        [totalRecords]="totalRecords"
        (confirmImport)="onImportConfirmed($event)"
        (cancelImport)="onImportCanceled()"
      ></app-data-preview>
    </div>
  }

  <!-- Result View -->
  @if (currentView === 'result' && importResult) {
    <div class="view-container">
      <div class="import-result-container">
        <mat-card class="result-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>task_alt</mat-icon>
              Import Completed
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="result-stats">
              <div class="stat-item">
                <span class="stat-label">Records Inserted:</span>
                <span class="stat-value">{{ importResult.recordsInserted }}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Records Updated:</span>
                <span class="stat-value">{{ importResult.recordsUpdated }}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">First Record Date:</span>
                <span class="stat-value">{{ importResult.firstRecordDate | date:'medium' }}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Last Record Date:</span>
                <span class="stat-value">{{ importResult.lastRecordDate | date:'medium' }}</span>
              </div>
              @if (importResult.errorCount > 0) {
                <div class="stat-item">
                  <span class="stat-label error">Errors:</span>
                  <span class="stat-value error">{{ importResult.errorCount }}</span>
                </div>
              }
            </div>
          </mat-card-content>
          <mat-card-actions class="result-actions">
            <button
              mat-raised-button
              color="primary"
              (click)="resetToUpload()"
              >
              <mat-icon>add_circle</mat-icon>
              Import Another File
            </button>
            <button
              mat-raised-button
              (click)="navigateToHome()"
              >
              <mat-icon>home</mat-icon>
              Go to Home
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  }
</div>
